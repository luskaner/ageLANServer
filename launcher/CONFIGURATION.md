# Configuration

There are multiple ways to configure the launcher behavior, the priority is as follows, if multiple are set:

1. Command line options.
2. Environment variables.
3. Configuration files. If multiple are used, the last one has the most priority.
4. Configuration default.

## Configuring the hosts and certificate

### Manually

Advanced users may want to configure the hosts file and certificate permanently to avoid the confirmation dialogs and
admin rights.

#### Certificate

##### Windows

##### Linux

#### Caveats

* You will need to always connect to the same server (or share the certificate between servers) so setting `Server.Host`
  to a fixed value, and `Server.StartStop` to a non-empty value is highly recommended.
* Server certificates generated by `genCert` expire after a year (but you could generate one manually that does not), so
  they will need to be replaced.

#### Hosts

### Script

### Launcher config tool

### Launcher

## Values

| Configuration                        | Option                         | Default                                                                                                                                                                                    | Required                                                                                                                    | Type                                                | Description                                                                                                                                                                                                                                                                                                             |
|--------------------------------------|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `GameTitle`                          | `--gameTitle`/`-e`             | -                                                                                                                                                                                          | Yes.                                                                                                                        | One of `age1`, `age2` or `age3`                     | Game title. Age of Empires: Definitive Edition (`age1`), Age of Empires II: Definitive Edition (`age2`) or Age of Empires III: Definitive Edition (`age3`).                                                                                                                                                             |
| `Debug`                              | `--debug`                      | `false`.                                                                                                                                                                                   | No.                                                                                                                         | flag.                                               | Enable debug mode to show extra info in the console.                                                                                                                                                                                                                                                                    |
| `NoAddHost`                          | `--noAddHost`/`-t`             | `false`.                                                                                                                                                                                   | Unless using `{HostFilePath}` in `Client.Executable.Args`, doing it via `SetupCommand` or manually.                         | flag.                                               | Disallow to add host entries to the hosts file even if necessary (needs admin).                                                                                                                                                                                                                                         |                                                                                                                          |
| `StoreToAddCertificate`              | `--storeToAddCertificate`/`-c` | `local`.                                                                                                                                                                                   | Unless using `{CertFilePath}` in `Client.Executable.Args`, doing it via `SetupCommand` or manually.                         | One of `local`, ü™ü `user` or `` (*empty*)           | Type of certificate store to add the certificate if necessary. `local` needs admin.                                                                                                                                                                                                                                     |                  
| `SetupCommand`                       | -                              | `[]` (empty).                                                                                                                                                                              | Unless having `NoAddHost` as `false`, using `{CertFilePath}` in `Client.Executable.Args` or manually configuring hosts and. | List of text with the command.                      | Command to run before doing any configuration. It must return a `0` exit code to continue. If you need to keep it running spawn a new detached process. If empty, nothing will be ran. ü™ü path names need to use double backslashes within single quotes or be within double quotes. You may use environment variables. |
| `RevertCommand`                      | -                              | `[]` (empty).                                                                                                                                                                              |                                                                                                                             | List of text with the command.                      | Command to run after `SetupCommand` has ran and the game has exited and everything has been reverted. It may run before if there is an error. If empty, nothing will be ran. ü™ü path names need to use double backslashes within single quotes or be within double quotes. You may use environment variables.           |
| üêß`Isolation.WindowsUserProfilePath` | `--windowsUserProfilePath`     | `` (empty). Required when `Isolation.NoMetadata` is `false`, `Client.Launcher` is `path` and `GameTitle` is not `age1`.                                                                    |                                                                                                                             | Directory path.                                     | Must point to the equivalent `%USERPROFILE%` in ü™ü. You may use environment variables.                                                                                                                                                                                                                                  |
| `Isolation.NoMetadata`               | `--noIsolateMetadata`          | `false`. üêß Requires `Isolation.WindowsUserProfilePath` when `Client.Launcher` is `path` and `GameTitle` is not `age1`.                                                                    |                                                                                                                             | flag.                                               | Do not launch the game with an isolated metadata directory.                                                                                                                                                                                                                                                             |
| `Client.Launcher`                    | `--clientLauncher`/`-l`        | `` (empty). Requires `Client.PathCommand`                                                                                                                                                  |                                                                                                                             | One of `` (empty), `path`, `steam` or ü™ü `msstore`. | Type of launcher to use. `path` uses the path specified in `Client.LauncherPath`, `custom` uses the custom launcher specified in `Client.PathCommand`, If `` (empty), `steam` then ü™ü `msstore` will be used.                                                                                                           |
| `Client.PathCommand`                 | -                              | `[]` (empty). Required when `Client.Launcher` is `path`. If `{HostFilePath}` is used, then `NoAddHost` is `true`. If `{CertFilePath}` is used, then `StoreToAddCertificate` is `` (empty). |                                                                                                                             | List of text with the command.                      | Command to run to launch the game. In the command arguments you may use `{HostFilePath}` to be replaced by the host file path and `{CertFilePath}` to be replaced by the certificate file path. You may use environment variables.                                                                                      |
| `Server.Host`                        | `--server`/`-s`                | `0.0.0.0` as placeholder. Required if                                                                                                                                                      |                                                                                                                             | Text with the IPv4 address, hostname or FQDN.       | Used to connect to the server if configured to do so and needed.                                                                                                                                                                                                                                                        |
| `Server.StartStop`                   | `--serverStartStop`/`-a`       | `` (empty).                                                                                                                                                                                |                                                                                                                             | flag.                                               | Start and stop the server if configured to do so. If `false`, the server will not be started or stopped.                                                                                                                                                                                                                |