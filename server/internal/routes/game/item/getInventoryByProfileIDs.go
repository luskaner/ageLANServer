package item

import (
	"encoding/json"
	"fmt"
	"net/http"

	i "github.com/luskaner/ageLANServer/server/internal"
	"github.com/luskaner/ageLANServer/server/internal/models"
)

func GetInventoryByProfileIDs(w http.ResponseWriter, r *http.Request) {
	profileIdsStr := r.URL.Query().Get("profileIDs")
	var profileIds []int32
	err := json.Unmarshal([]byte(profileIdsStr), &profileIds)
	if err != nil {
		i.JSON(&w, i.A{2})
		return
	} /*
		initialData := make(i.A, len(profileIds))
		finalData := make(i.A, len(profileIds))
		finalDataArr := i.A{
			// What this mean?
			i.A{1, 0, 0, 0, 10000, 0, 0, 0, 1},
			i.A{2, 0, 1, 0, 10000, 0, 1, 1, 0},
		}
		for j, profileId := range profileIds {
			profileIdStr := strconv.Itoa(int(profileId))
			initialData[j] = i.A{
				profileIdStr,
				// And this?
				i.A{},
			}
			finalData[j] = i.A{
				profileIdStr,
				finalDataArr,
			}
		}
		i.JSON(&w, i.A{0, initialData, finalData})*/
	// get game
	users := models.G(r).Users()
	user, ok := users.GetUserById(profileIds[0])
	if !ok {
		i.JSON(&w, i.A{2})
		return
	}
	id := user.GetStatId()
	i.RawJSON(
		&w,
		[]byte(fmt.Sprintf(`
[
  0,
  [
    [
      "%[1]d",
      [
        [
          1664529659,
          0,
          450847,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529660,
          0,
          451704,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529661,
          0,
          451848,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529662,
          0,
          451762,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529663,
          0,
          451806,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529664,
          0,
          451770,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529665,
          0,
          451840,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529666,
          0,
          451923,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          4,
          -1,
          3,
          -1
        ],
        [
          1664529667,
          0,
          451960,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          5,
          -1,
          3,
          -1
        ],
        [
          1664529668,
          0,
          452595,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          3,
          -1,
          3,
          -1
        ],
        [
          1664529669,
          1,
          452658,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          2,
          -1,
          19,
          -1
        ],
        [
          1664529670,
          0,
          453937,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529671,
          0,
          453169,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529672,
          0,
          453199,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529673,
          0,
          453186,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529674,
          0,
          453197,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529675,
          1,
          455192,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          6,
          -1,
          3,
          -1
        ],
        [
          1664529676,
          0,
          456422,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529677,
          0,
          456424,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529678,
          0,
          456421,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529679,
          0,
          456423,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529680,
          0,
          451924,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529681,
          0,
          451925,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529682,
          0,
          452649,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529683,
          0,
          451927,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529684,
          0,
          451928,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529685,
          0,
          451929,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529686,
          0,
          451946,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529687,
          0,
          453196,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529688,
          0,
          453103,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529689,
          0,
          451951,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529690,
          0,
          451954,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529691,
          0,
          451952,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529692,
          0,
          452482,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529693,
          0,
          452483,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529694,
          0,
          452484,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529695,
          0,
          452522,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529696,
          0,
          452530,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529697,
          0,
          452529,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529698,
          0,
          452532,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529699,
          0,
          452527,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529700,
          0,
          452526,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529701,
          0,
          452525,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529702,
          0,
          452524,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529703,
          0,
          452523,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529704,
          0,
          452535,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529705,
          0,
          452534,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529706,
          0,
          452540,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529707,
          0,
          452536,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529708,
          0,
          452539,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529709,
          0,
          452538,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529710,
          0,
          452541,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529711,
          0,
          452545,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529712,
          0,
          452551,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529713,
          0,
          452548,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529714,
          0,
          452547,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529715,
          0,
          452546,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529716,
          0,
          452485,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529717,
          0,
          452543,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529718,
          0,
          452544,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529719,
          0,
          452549,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529720,
          0,
          452550,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529721,
          0,
          452515,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529722,
          0,
          452516,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529723,
          0,
          452520,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529724,
          0,
          452519,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529725,
          0,
          452487,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529726,
          0,
          452517,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529727,
          0,
          452518,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529728,
          0,
          452486,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529729,
          0,
          451953,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529730,
          0,
          452552,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529731,
          0,
          452553,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529732,
          0,
          452554,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529733,
          0,
          452555,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529734,
          0,
          452558,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529735,
          0,
          452556,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529736,
          0,
          452489,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529737,
          0,
          452488,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529738,
          0,
          452557,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          3,
          -1
        ],
        [
          1664529739,
          3,
          6005284,
          %[1]d,
          1,
          0,
          "",
          %[2]d,
          0,
          -1,
          35,
          -1
        ]
      ]
    ]
  ],
  [
    [
      "%[1]d",
      [
        [
          1,
          0,
          4,
          1405268,
          1,
          0,
          1,
          0,
          0
        ],
        [
          2,
          0,
          1,
          1,
          2,
          0,
          0,
          0,
          0
        ],
        [
          3,
          0,
          2,
          4,
          1,
          0,
          1,
          1,
          1
        ],
        [
          4,
          0,
          0,
          0,
          1200,
          0,
          0,
          0,
          0
        ],
        [
          5,
          0,
          5,
          1408204,
          1,
          0,
          1,
          1,
          0
        ],
        [
          6,
          0,
          3,
          1397006,
          1,
          0,
          1,
          0,
          0
        ],
        [
          7,
          0,
          6,
          1527881,
          1,
          0,
          0,
          1,
          1
        ]
      ]
    ]
  ]
]
`, profileIds[0], id),
		))
}
